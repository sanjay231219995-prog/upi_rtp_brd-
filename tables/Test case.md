| TC-ID  | UC-ID       | Description                                        | Type       | Preconditions                               | Steps                                                                                   | Expected Result                                              | Related REQ | Evidence                             | Status   |
|--------|-------------|----------------------------------------------------|------------|---------------------------------------------|-----------------------------------------------------------------------------------------|--------------------------------------------------------------|-------------|---------------------------------------|----------|
| TC-01  | UC-01       | Happy-path P2P push payment                        | Positive   | Valid API key; balance ≥ 500 INR            | POST `/intent/android` with valid body                                                 | 200 + `{ code: "SUCCESS" }`                                   | REQ-001     | `phonepe_success_push.json`           | Pass     |
| TC-02  | UC-01       | Latency breach returns TIMEOUT                     | Negative   | Valid API key; inject 2 s network delay     | POST `/intent/android`                                                                  | 504 + `{ code: "TIMEOUT" }`                                   | REQ-021     | _to be captured_                      | Pending  |
| TC-03  | UC-01       | Duplicate `txnId` yields error                     | Negative   | Same `merchantTransactionId` as TC-01       | Repeat POST `/intent/android`                                                           | 409 + `{ code: "TXN_DUPLICATE" }`                             | REQ-003     | `phonepe_duplicate.json`              | Pass     |
| TC-04  | UC-02       | Happy-path collect (dynamic QR)                    | Positive   | Valid API key; invoiceId set                | POST `/collect` then POST `/collect/approve`                                            | 201 + `{ code: "SUCCESS" }`                                   | REQ-002     | _to be captured_                      | Pending  |
| TC-05  | UC-02       | Collect amount-limit validation                    | Negative   | Valid API key; amount = 210 000             | POST `/collect`                                                                        | 400 + `{ code: "LIMIT_EXCEEDED" }`                            | REQ-002     | `phonepe_limit_exceeded.json`         | Pass     |
| TC-06  | UC-02       | Collect name-display missing → error               | Negative   | Disable name API in sandbox                 | POST `/collect`                                                                        | 400 + `{ code: "VALIDATION_ERROR" }`                         | REQ-018     | _to be captured_                      | Pending  |
| TC-07  | UC-03       | Register signed mandate                            | Positive   | Valid API key; amountRule set ≤ 15 k        | POST `/mandate/register`                                                                | 201 + `{ mandateId: "..." }`                                 | REQ-004     | _to be captured_                      | Pending  |
| TC-08  | UC-03       | Mandate > ₹15 k without AFA → error                | Negative   | Valid API key; amountRule = 16 000          | POST `/mandate/register`                                                                | 403 + `{ code: "AFA_REQUIRED" }`                              | REQ-005     | _to be captured_                      | Pending  |
| TC-09  | UC-03       | Auto-debit on schedule                              | Positive   | MandateId exists                             | POST `/mandate/debit`                                                                   | 200 + `{ code: "SUCCESS" }`                                   | REQ-006     | _to be captured_                      | Pending  |
| TC-10  | UC-03       | Mandate retry limit exceeded                       | Negative   | 3 prior retries                              | POST `/mandate/debit`                                                                   | 429 + `{ code: "RETRY_LIMIT" }`                               | REQ-006     | _to be captured_                      | Pending  |
| TC-11  | UC-04       | Overdraft fallback when balance insufficient       | Positive   | Balance = 0; OD limit ≥ 500                  | POST `/intent/android`                                                                  | 200 + `{ code: "SUCCESS", OD_USED: true }`                   | REQ-008     | _to be captured_                      | Pending  |
| TC-12  | UC-04       | Overdraft disabled → insufficient-funds error      | Negative   | Balance = 0; OD disabled                     | POST `/intent/android`                                                                  | 402 + `{ code: "INSUFFICIENT_FUNDS" }`                       | REQ-008     | _to be captured_                      | Pending  |
| TC-13  | UC-05       | VPA alias resolution positive                      | Positive   | Valid API key; vpa = “12345678”              | POST `/validateVpa`                                                                     | 200 + `{ vpa: "name@upi" }`                                   | REQ-007     | _to be captured_                      | Pending  |
| TC-14  | UC-01       | Missing/invalid API key                            | Negative   | No or wrong `X-VERIFY` header                | POST `/intent/android`                                                                  | 401 + `{ code: "INVALID_SIGNATURE" }`                        | REQ-010     | `phonepe_invalid_sig.json`            | Pass     |
| TC-15  | NFR-Logging | Log retention ≥ 7 years                            | Positive   | Logs older than 7 yrs exist                  | Query audit table                                                                      | Logs still retrievable                                       | REQ-012     | _to be captured_                      | Pending  |
| TC-16  | Common      | Balance-enquiry rate-limit                         | Negative   | 50 prior balance calls in 24 h                | GET `/balance`                                                                          | 429 + `{ code: "RATE_LIMIT" }`                               | REQ-017     | _to be captured_                      | Pending  |
| TC-17  | NFR-Perf    | Burst-load 5 000 TPS                                | Positive   | K6 script configured                          | Run K6 at 5 000 RPS for 10 min                                                          | P95 latency ≤ 2 000 ms; error rate < 0.1 %                    | REQ-020     | `reports/k6_load_test.html`           | Pending  |
| TC-18  | NFR-Sec     | Expired API key → auth error                       | Negative   | Rotate to expired key                         | Use old key in header                                                                   | 401 + `{ code: "KEY_EXPIRED" }`                              | REQ-011     | _to be captured_                      | Pending  |
| TC-19  | UC-05       | Alias lookup latency breach → timeout              | Negative   | Inject 80 ms extra delay                      | POST `/validateVpa`                                                                     | 504 + `{ code: "DIRECTORY_TIMEOUT" }`                        | REQ-007     | _to be captured_                      | Pending  |
| TC-20  | UC-Common   | Hourly settlement file XSD compliance              | Positive   | camt.053 file generated                       | Validate file against CBPR+ XSD                                                         | 0 schema errors                                              | REQ-022     | _to be captured_                      | Pending  |
| TC-21  | NFR-DR      | Fail-over to DR replica                            | Positive   | Primary DB down; DR replica available         | POST `/intent/android`                                                                  | 200 + `{ code: "SUCCESS" }` on replica; RTO ≤ 60 min         | REQ-027     | _to be captured_                      | Pending  |
| TC-22  | Common      | RFC 7807 error payload                             | Positive   | Invalid JSON schema                            | POST `/intent/android` with malformed body                                             | 400 + ProblemDetails JSON with `type`/`title`/`detail`       | REQ-024     | _to be captured_                      | Pending  |
| TC-23  | Common      | AML block on sanctioned VPA                        | Negative   | Use blocked `payerVpa`                         | POST `/intent/android`                                                                  | 403 + `{ code: "AML_BLOCK" }`                                | REQ-016     | _to be captured_                      | Pending  |
| TC-24  | Common      | Check transaction status                           | Positive   | Existing `txnId`                               | GET `/status?txnId=…`                                                                   | 200 + `{ status: "INITIATED"|"SUCCESS"|"FAILED" }`           | REQ-009     | _to be captured_                      | Pending  |
| TC-25  | UC-Common   | Fraud-pattern API FPR ≤ 0.2 %, TPR ≥ 90 %           | Positive   | Fraud model trained on 1 M rows                | POST `/fraud/score` with test dataset                                                   | FPR ≤ 0.2 %, TPR ≥ 90 %                                       | REQ-016     | _to be captured_                      | Pending  |
